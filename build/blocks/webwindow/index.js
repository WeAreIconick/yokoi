(()=>{"use strict";var e,r={2670:()=>{const e=window.wp.blocks,r=window.wp.element,o=window.wp.i18n,s=window.wp.blockEditor,t=window.wp.components,i=window.ReactJSXRuntime,l=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"yokoi/webwindow","version":"0.1.0","title":"WebWindow","category":"yokoi","icon":{"src":"<svg viewBox=\\"0 0 24 24\\" xmlns=\\"http://www.w3.org/2000/svg\\"><rect x=\\"3\\" y=\\"3\\" width=\\"18\\" height=\\"18\\" rx=\\"2\\" fill=\\"none\\" stroke=\\"currentColor\\" stroke-width=\\"1.5\\"/><rect x=\\"5\\" y=\\"7\\" width=\\"14\\" height=\\"12\\" rx=\\"1\\" fill=\\"none\\" stroke=\\"currentColor\\" stroke-width=\\"1.2\\"/><path d=\\"M10 11.5 8 13l2 1.5\\" fill=\\"none\\" stroke=\\"currentColor\\" stroke-width=\\"1.5\\" stroke-linecap=\\"round\\" stroke-linejoin=\\"round\\"/><path d=\\"M14 11.5 16 13l-2 1.5\\" fill=\\"none\\" stroke=\\"currentColor\\" stroke-width=\\"1.5\\" stroke-linecap=\\"round\\" stroke-linejoin=\\"round\\"/></svg>"},"description":"Responsive frames that look gorgeous on any device, plus automatic zoom that makes everything fit just right.","keywords":["embed","iframe","browser","preview"],"example":{"attributes":{"src":"https://iconick.io","scaleToFit":true}},"attributes":{"src":{"type":"string","default":"https://iconick.io"},"scaleToFit":{"type":"boolean","default":true}},"supports":{"html":false,"align":["wide","full"],"layout":false},"textdomain":"yokoi","editorScript":"file:./index.js","editorStyle":"file:./editor.css","style":"file:./style-index.css","viewScript":"file:./view.js"}');(0,e.registerBlockType)(l.name,{...l,icon:"desktop",edit:({attributes:e,setAttributes:l})=>{const{src:n,scaleToFit:a}=e,[d,c]=(0,r.useState)(!1),w=(0,r.useRef)(null),p=(0,r.useRef)(null),[f,u]=(0,r.useState)(1),[h,b]=(0,r.useState)(900);(0,r.useEffect)(()=>{if(!a)return u(1),void b(900);const e=()=>{if(!p.current)return;const e=p.current.offsetWidth||600,r=Math.min(1,e/1440);u(r),b(Math.round(900*r))};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[a]);const m=a?{width:"1440px",height:"900px",border:d?"2px solid #f00":"1px solid #ddd",background:"#fff",transform:`scale(${f})`,transformOrigin:"top left",display:"block",overflow:"hidden"}:{width:"100%",minHeight:400,border:d?"2px solid #f00":"1px solid #ddd",background:"#fff",display:"block",overflow:"auto"},k=a?{width:"100%",height:`${h}px`,maxWidth:"100%",overflow:"hidden",position:"relative",background:"#fff"}:{};return(0,i.jsxs)("div",{...(0,s.useBlockProps)(),children:[(0,i.jsx)(s.InspectorControls,{children:(0,i.jsxs)(t.PanelBody,{title:(0,o.__)("WebWindow Settings","yokoi"),initialOpen:!0,children:[(0,i.jsx)(t.TextControl,{type:"url",label:(0,o.__)("Webpage URL","yokoi"),value:n,onChange:e=>l({src:e}),placeholder:"https://iconick.io"}),(0,i.jsx)(t.ToggleControl,{label:(0,o.__)("Scale to fit (show the full site at once)","yokoi"),checked:a,onChange:e=>l({scaleToFit:e}),help:(0,o.__)("Zooms out the embedded page so more of the full site is visible. This may reduce readability or interactivity.","yokoi")})]})}),(0,i.jsxs)("div",{className:"webwindow-block-embed browser-frame",ref:p,children:[(0,i.jsxs)("div",{className:"browser-frame-bar",children:[(0,i.jsx)("span",{className:"browser-frame-dot red"}),(0,i.jsx)("span",{className:"browser-frame-dot yellow"}),(0,i.jsx)("span",{className:"browser-frame-dot green"}),(0,i.jsx)("span",{className:"browser-frame-url",children:n||""}),n?(0,i.jsx)("a",{href:n,className:"browser-frame-open-button",target:"_blank",rel:"noopener noreferrer",title:(0,o.__)("Open full site in a new tab","yokoi"),onClick:e=>{e.preventDefault(),window.open(n,"_blank","noopener,noreferrer")},children:"↗"}):null]}),(0,i.jsx)("div",{className:"webwindow-iframe-outer",style:k,children:n?(0,i.jsx)("iframe",{ref:w,title:(0,o.__)("Embedded web page","yokoi"),src:n,onError:()=>{c(!0)},style:m,sandbox:"allow-scripts allow-forms allow-same-origin allow-popups allow-popups-to-escape-sandbox",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"}):null}),n&&d?(0,i.jsx)(t.Notice,{status:"warning",isDismissible:!1,children:(0,o.__)("This site refused to be embedded or is currently unavailable.","yokoi")}):null,n?null:(0,i.jsx)("div",{className:"webwindow-block-empty"})]})]})},save:({attributes:e})=>{const{src:r,scaleToFit:t}=e,l=r&&(r.startsWith("http://")||r.startsWith("https://"))?r:"";return(0,i.jsx)("div",{...s.useBlockProps.save(),"data-src":l,"data-scale-to-fit":t?"1":"0",children:(0,i.jsxs)("div",{className:"webwindow-block-embed browser-frame",children:[(0,i.jsxs)("div",{className:"browser-frame-bar",children:[(0,i.jsx)("span",{className:"browser-frame-dot red"}),(0,i.jsx)("span",{className:"browser-frame-dot yellow"}),(0,i.jsx)("span",{className:"browser-frame-dot green"}),(0,i.jsx)("span",{className:"browser-frame-url",children:l||""}),l?(0,i.jsx)("a",{href:l,className:"browser-frame-open-button",target:"_blank",rel:"noopener noreferrer",title:(0,o.__)("Open full site in a new tab","yokoi"),children:"↗"}):null]}),(0,i.jsx)("noscript",{children:l?(0,i.jsx)("iframe",{title:(0,o.__)("Embedded web page (noscript fallback)","yokoi"),src:l,style:{width:"100%",minHeight:400,border:"1px solid #ccc"},sandbox:"allow-scripts allow-forms allow-same-origin allow-popups allow-popups-to-escape-sandbox",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"}):null}),(0,i.jsx)("div",{className:"webwindow-iframe-outer"}),l?null:(0,i.jsx)("div",{className:"webwindow-block-empty"})]})})}})}},o={};function s(e){var t=o[e];if(void 0!==t)return t.exports;var i=o[e]={exports:{}};return r[e](i,i.exports,s),i.exports}s.m=r,e=[],s.O=(r,o,t,i)=>{if(!o){var l=1/0;for(c=0;c<e.length;c++){for(var[o,t,i]=e[c],n=!0,a=0;a<o.length;a++)(!1&i||l>=i)&&Object.keys(s.O).every(e=>s.O[e](o[a]))?o.splice(a--,1):(n=!1,i<l&&(l=i));if(n){e.splice(c--,1);var d=t();void 0!==d&&(r=d)}}return r}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[o,t,i]},s.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),(()=>{var e={91:0,755:0};s.O.j=r=>0===e[r];var r=(r,o)=>{var t,i,[l,n,a]=o,d=0;if(l.some(r=>0!==e[r])){for(t in n)s.o(n,t)&&(s.m[t]=n[t]);if(a)var c=a(s)}for(r&&r(o);d<l.length;d++)i=l[d],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(c)},o=globalThis.webpackChunkyokoi=globalThis.webpackChunkyokoi||[];o.forEach(r.bind(null,0)),o.push=r.bind(null,o.push.bind(o))})();var t=s.O(void 0,[755],()=>s(2670));t=s.O(t)})();