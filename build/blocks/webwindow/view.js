!function(){"use strict";const e=(e,t)=>{if(!e||!t||!document.body.contains(e))return;const o=t.offsetWidth||600,r=Math.min(1,o/1440);requestAnimationFrame(()=>{document.body.contains(e)&&(e.style.transform=`scale(${r})`,e.style.transformOrigin="top left",t.style.height=900*r+"px")})},t=t=>{if("true"===t.dataset.webwindowInitialized)return;const o=t.getAttribute("data-src"),r="1"===t.getAttribute("data-scale-to-fit");if(!o||!(e=>{if(!e||"string"!=typeof e)return!1;const t=["javascript:","data:","vbscript:","file:"],o=e.toLowerCase().trim();for(const e of t)if(o.startsWith(e))return!1;if(!o.startsWith("http://")&&!o.startsWith("https://"))return!1;try{const t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch{return!1}})(o))return;if(t.querySelector(".webwindow-js-iframe"))return;const n=t.querySelector(".webwindow-block-embed"),i=t.querySelector(".webwindow-iframe-outer")||n;if(!n||!i)return;const s=document.createElement("iframe");if(s.className="webwindow-js-iframe",s.title="Embedded Web Page",s.setAttribute("loading","lazy"),s.setAttribute("referrerpolicy","no-referrer-when-downgrade"),s.setAttribute("sandbox","allow-scripts allow-forms allow-same-origin allow-popups allow-popups-to-escape-sandbox allow-presentation allow-orientation-lock allow-modals"),s.setAttribute("allow","autoplay; encrypted-media; fullscreen; clipboard-write; accelerometer; gyroscope; web-share"),s.src=o,s.onerror=()=>{const e=document.createElement("div");e.className="webwindow-notice",e.setAttribute("role","alert"),e.style.cssText="background: #fffbe5; border-left: 4px solid #ffb900; margin: 8px 0; padding: 8px 12px; font-size: 0.95em;",e.textContent="Could not display this page (site does not allow embedding, or it is unavailable).",n&&document.body.contains(n)&&(n.appendChild(e),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},3500))},r){s.style.cssText="width: 1440px; height: 900px; border: 1px solid #ddd; display: block; overflow: hidden;",requestAnimationFrame(()=>{e(s,i)});const o=(()=>{let t;return function(...o){clearTimeout(t),t=setTimeout(()=>{clearTimeout(t),(()=>{e(s,i)})(...o)},150)}})();window.addEventListener("resize",o,{passive:!0}),t._webwindowCleanup=()=>{window.removeEventListener("resize",o)}}else s.style.cssText="width: 100%; min-height: 400px; border: 1px solid #ddd; overflow: auto;";const a=t.querySelector(".browser-frame-url");a&&(a.textContent=(e=>{if(!e||"string"!=typeof e)return"";const t=document.createElement("div");return t.textContent=e,t.innerHTML})(o)),i.appendChild(s),t.dataset.webwindowInitialized="true"},o=()=>{const e=document.querySelectorAll(".wp-block-yokoi-webwindow[data-src]");if(e.length)if("IntersectionObserver"in window){const o=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(t(e.target),o.unobserve(e.target))})},{rootMargin:"50px"});e.forEach(e=>{o.observe(e)})}else e.forEach(e=>{t(e)})};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",o):o()}();