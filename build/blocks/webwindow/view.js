document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".wp-block-yokoi-webwindow[data-src]");if(!e.length)return;const t=(e,t)=>{if(!e||!t)return;const o=t.offsetWidth||600,i=Math.min(1,o/1440);e.style.transform=`scale(${i})`,e.style.transformOrigin="top left",t.style.height=900*i+"px",e.style.display="block",e.style.overflow="hidden"};e.forEach(e=>{const o=e.getAttribute("data-src"),i="1"===e.getAttribute("data-scale-to-fit");if(!o||e.querySelector(".webwindow-js-iframe"))return;const d=e.querySelector(".webwindow-block-embed"),s=e.querySelector(".webwindow-iframe-outer")||d;if(!d||!s)return;const l=document.createElement("iframe");if(l.className="webwindow-js-iframe",l.title="Embedded Web Page",l.src=o,l.sandbox="allow-scripts allow-forms allow-same-origin allow-popups",l.onerror=()=>{const e=document.createElement("div");e.className="webwindow-notice",e.style.background="#fffbe5",e.style.borderLeft="4px solid #ffb900",e.style.margin="8px 0",e.style.padding="8px 12px",e.style.fontSize="0.95em",e.innerText="Could not display this page (site does not allow embedding, or it is unavailable).",d.appendChild(e),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},3500)},i?(l.style.width="1440px",l.style.height="900px",l.style.border="1px solid #ddd",l.style.display="block",l.style.overflow="hidden",setTimeout(()=>{t(l,s)},16)):(l.style.width="100%",l.style.minHeight="400px",l.style.border="1px solid #ddd",l.style.overflow="auto"),s.appendChild(l),i){const e=()=>{document.body.contains(l)?t(l,s):window.removeEventListener("resize",e)};window.addEventListener("resize",e)}})});