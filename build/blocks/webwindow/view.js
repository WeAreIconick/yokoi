!function(){"use strict";const e=(e,t)=>{if(!e||!t||!document.body.contains(e))return;const r=t.offsetWidth||600,o=Math.min(1,r/1440);requestAnimationFrame(()=>{document.body.contains(e)&&(e.style.transform=`scale(${o})`,e.style.transformOrigin="top left",t.style.height=900*o+"px")})},t=t=>{if("true"===t.dataset.webwindowInitialized)return;const r=t.getAttribute("data-src"),o="1"===t.getAttribute("data-scale-to-fit");if(!r||!(e=>{if(!e||"string"!=typeof e)return!1;const t=["javascript:","data:","vbscript:","file:"],r=e.toLowerCase().trim();for(const e of t)if(r.startsWith(e))return!1;if(!r.startsWith("http://")&&!r.startsWith("https://"))return!1;try{const t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch{return!1}})(r))return;if(t.querySelector(".webwindow-js-iframe"))return;const n=t.querySelector(".webwindow-block-embed"),i=t.querySelector(".webwindow-iframe-outer")||n;if(!n||!i)return;const s=document.createElement("iframe");if(s.className="webwindow-js-iframe",s.title="Embedded Web Page",s.setAttribute("loading","lazy"),s.setAttribute("referrerpolicy","no-referrer-when-downgrade"),s.setAttribute("sandbox","allow-scripts allow-forms allow-same-origin allow-popups allow-popups-to-escape-sandbox"),s.src=r,s.onerror=()=>{const e=document.createElement("div");e.className="webwindow-notice",e.setAttribute("role","alert"),e.style.cssText="background: #fffbe5; border-left: 4px solid #ffb900; margin: 8px 0; padding: 8px 12px; font-size: 0.95em;",e.textContent="Could not display this page (site does not allow embedding, or it is unavailable).",n&&document.body.contains(n)&&(n.appendChild(e),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},3500))},o){s.style.cssText="width: 1440px; height: 900px; border: 1px solid #ddd; display: block; overflow: hidden;",requestAnimationFrame(()=>{e(s,i)});const r=(()=>{let t;return function(...r){clearTimeout(t),t=setTimeout(()=>{clearTimeout(t),(()=>{e(s,i)})(...r)},150)}})();window.addEventListener("resize",r,{passive:!0}),t._webwindowCleanup=()=>{window.removeEventListener("resize",r)}}else s.style.cssText="width: 100%; min-height: 400px; border: 1px solid #ddd; overflow: auto;";const a=t.querySelector(".browser-frame-url");a&&(a.textContent=(e=>{if(!e||"string"!=typeof e)return"";const t=document.createElement("div");return t.textContent=e,t.innerHTML})(r)),i.appendChild(s),t.dataset.webwindowInitialized="true"},r=()=>{const e=document.querySelectorAll(".wp-block-yokoi-webwindow[data-src]");if(e.length)if("IntersectionObserver"in window){const r=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(t(e.target),r.unobserve(e.target))})},{rootMargin:"50px"});e.forEach(e=>{r.observe(e)})}else e.forEach(e=>{t(e)})};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",r):r()}();