(()=>{"use strict";var e,i={662:(e,i,o)=>{const n=window.wp.plugins,s=window.wp.editPost,t=window.wp.components,l=window.wp.apiFetch;var a=o.n(l);const r=window.wp.i18n,c=window.wp.element,d=window.ReactJSXRuntime,b=({blocksEnabled:e={},blockDefinitions:i={},onToggle:o})=>{const n=(Object.keys(i).length?Object.keys(i):Object.keys(e)).map(i=>{var o;return[i,null===(o=e?.[i])||void 0===o||o]});return(0,d.jsxs)(t.PanelBody,{title:(0,r.__)("Enable/Disable Blocks","yokoi"),initialOpen:!0,children:[0===n.length&&(0,d.jsx)("p",{className:"yokoi-sidebar__empty",children:(0,r.__)("No blocks registered yet. Blocks will appear here once available.","yokoi")}),n.map(([e,n])=>{const s=i[e]?.title||e,l=i[e]?.description;return(0,d.jsx)(t.ToggleControl,{label:s,checked:Boolean(n),onChange:()=>o(e),help:l},e)})]})},u=window.yokoiSettings||{},k=(Array.isArray(u.blocks)?u.blocks:[]).reduce((e,i)=>(i?.name&&(e[i.name]=i),e),{}),g={blocks_enabled:Object.fromEntries(Object.keys(k).map(e=>[e,!0])),default_configs:{},visibility_controls:{}},_=e=>{const i={...g,...e||{}};return i.blocks_enabled={...g.blocks_enabled,...e?.blocks_enabled||{}},Object.keys(k).forEach(e=>{"boolean"!=typeof i.blocks_enabled[e]&&(i.blocks_enabled[e]=Boolean(g.blocks_enabled[e]))}),i.default_configs={...g.default_configs,...e?.default_configs||{}},i.visibility_controls={...g.visibility_controls,...e?.visibility_controls||{}},i};u?.nonce&&a().use(a().createNonceMiddleware(u.nonce));const y=e=>e?"string"==typeof e?e:e?.message?e.message:(0,r.__)("An unexpected error occurred.","yokoi"):"";(0,n.registerPlugin)("yokoi-settings-sidebar",{render:()=>{const[e,i]=(0,c.useState)(_(u.settings)),[o,n]=(0,c.useState)(!u.settings),[l,g]=(0,c.useState)(!1),[h,p]=(0,c.useState)(!1),[f,m]=(0,c.useState)(null),[v,j]=(0,c.useState)(!1),w=!1!==u?.capabilities?.canManage,x=u?.restEndpoint,S=(0,c.useCallback)(e=>_(e),[]),O=(0,c.useCallback)(()=>{x&&w?(n(!0),a()({url:x,method:"GET"}).then(e=>{i(S(e)),p(!1),v&&j(!1),m(null)}).catch(e=>{m(e)}).finally(()=>{n(!1)})):n(!1)},[x,w,S,v]);(0,c.useEffect)(()=>{u.settings||O()},[O]);const C=(0,c.useMemo)(()=>e?.blocks_enabled||{},[e]),P=(0,c.useCallback)(e=>{i(i=>{const o={...i.blocks_enabled,[e]:!i.blocks_enabled?.[e]};return{...i,blocks_enabled:o}}),p(!0)},[]),B=(0,c.useCallback)(()=>{x&&(g(!0),m(null),a()({url:x,method:"POST",data:{blocks_enabled:e.blocks_enabled,default_configs:e.default_configs,visibility_controls:e.visibility_controls}}).then(e=>{const o=S(e?.data||e);i(o),p(!1),j(!0),setTimeout(()=>j(!1),3e3)}).catch(e=>{m(e)}).finally(()=>{g(!1)}))},[x,e,S]);return w?(0,d.jsxs)(c.Fragment,{children:[(0,d.jsx)(s.PluginSidebarMoreMenuItem,{target:"yokoi-settings-sidebar",icon:"admin-settings",children:(0,r.__)("Yokoi Settings","yokoi")}),(0,d.jsxs)(s.PluginSidebar,{name:"yokoi-settings-sidebar",title:(0,r.__)("Yokoi Settings","yokoi"),icon:"admin-settings",children:[o&&(0,d.jsxs)("div",{className:"yokoi-sidebar__loading",children:[(0,d.jsx)(t.Spinner,{}),(0,d.jsx)("p",{children:(0,r.__)("Loading settings…","yokoi")})]}),v&&(0,d.jsx)(t.Notice,{status:"success",isDismissible:!1,children:(0,r.__)("Settings saved successfully.","yokoi")}),f&&(0,d.jsx)(t.Notice,{status:"error",onRemove:()=>m(null),children:y(f)}),(0,d.jsx)(b,{blocksEnabled:C,blockDefinitions:k,onToggle:P}),(0,d.jsxs)("div",{className:"yokoi-sidebar__footer",children:[(0,d.jsx)(t.Button,{variant:"secondary",onClick:O,isBusy:o,disabled:l,children:(0,r.__)("Reset","yokoi")}),(0,d.jsx)(t.Button,{variant:"primary",onClick:B,isBusy:l,disabled:!h||l,children:l?(0,r.__)("Saving…","yokoi"):(0,r.__)("Save Settings","yokoi")})]})]})]}):(0,d.jsxs)(c.Fragment,{children:[(0,d.jsx)(s.PluginSidebarMoreMenuItem,{target:"yokoi-settings-sidebar",icon:"admin-settings",children:(0,r.__)("Yokoi Settings","yokoi")}),(0,d.jsx)(s.PluginSidebar,{name:"yokoi-settings-sidebar",title:(0,r.__)("Yokoi Settings","yokoi"),icon:"admin-settings",children:(0,d.jsx)("p",{children:(0,r.__)("You do not have permission to manage Yokoi settings.","yokoi")})})]})},icon:"admin-settings"})}},o={};function n(e){var s=o[e];if(void 0!==s)return s.exports;var t=o[e]={exports:{}};return i[e](t,t.exports,n),t.exports}n.m=i,e=[],n.O=(i,o,s,t)=>{if(!o){var l=1/0;for(d=0;d<e.length;d++){for(var[o,s,t]=e[d],a=!0,r=0;r<o.length;r++)(!1&t||l>=t)&&Object.keys(n.O).every(e=>n.O[e](o[r]))?o.splice(r--,1):(a=!1,t<l&&(l=t));if(a){e.splice(d--,1);var c=s();void 0!==c&&(i=c)}}return i}t=t||0;for(var d=e.length;d>0&&e[d-1][2]>t;d--)e[d]=e[d-1];e[d]=[o,s,t]},n.n=e=>{var i=e&&e.__esModule?()=>e.default:()=>e;return n.d(i,{a:i}),i},n.d=(e,i)=>{for(var o in i)n.o(i,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:i[o]})},n.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),(()=>{var e={61:0,118:0};n.O.j=i=>0===e[i];var i=(i,o)=>{var s,t,[l,a,r]=o,c=0;if(l.some(i=>0!==e[i])){for(s in a)n.o(a,s)&&(n.m[s]=a[s]);if(r)var d=r(n)}for(i&&i(o);c<l.length;c++)t=l[c],n.o(e,t)&&e[t]&&e[t][0](),e[t]=0;return n.O(d)},o=globalThis.webpackChunkyokoi=globalThis.webpackChunkyokoi||[];o.forEach(i.bind(null,0)),o.push=i.bind(null,o.push.bind(o))})();var s=n.O(void 0,[118],()=>n(662));s=n.O(s)})();