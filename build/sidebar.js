(()=>{"use strict";var e,o={661:(e,o,i)=>{const s=window.wp.plugins,n=window.wp.components,l=window.wp.apiFetch;var a=i.n(l);const t=window.wp.i18n,r=window.wp.element,c=window.wp.domReady;var d=i.n(c);const b=window.ReactJSXRuntime,u=({isLoading:e=!1,error:o=null,searchValue:i="",onSearchChange:s=()=>{},blocksEnabled:l={},blockDefinitions:a={},onToggle:r})=>{var c;const d=(Object.keys(a).length?Object.keys(a):Object.keys(l)).map(e=>{var o;return[e,null===(o=l?.[e])||void 0===o||o]}),u=null!==(c=i?.toLowerCase?.())&&void 0!==c?c:"",_=d.filter(([e])=>!u||`${a[e]?.title||e} ${a[e]?.description||""}`.toLowerCase().includes(u));return(0,b.jsx)(n.Panel,{children:(0,b.jsxs)(n.PanelBody,{title:(0,t.__)("Enable/Disable Blocks","yokoi"),initialOpen:!0,children:[(0,b.jsx)(n.SearchControl,{value:i,onChange:s,placeholder:(0,t.__)("Search blocks…","yokoi")}),e&&(0,b.jsx)(n.PanelRow,{className:"yokoi-sidebar__panel-row",children:(0,b.jsx)("p",{className:"yokoi-sidebar__loading-message",children:(0,t.__)("Loading block catalog…","yokoi")})}),o&&!e&&(0,b.jsx)(n.PanelRow,{className:"yokoi-sidebar__panel-row",children:(0,b.jsx)("p",{className:"yokoi-sidebar__error",children:o?.message||(0,t.__)("Unable to load block catalog.","yokoi")})}),0===d.length&&(0,b.jsx)(n.PanelRow,{className:"yokoi-sidebar__panel-row yokoi-sidebar__panel-row--empty",children:(0,b.jsx)("p",{className:"yokoi-sidebar__empty",children:(0,t.__)("No blocks registered yet. Blocks will appear here once available.","yokoi")})}),!e&&0===_.length&&d.length>0&&(0,b.jsx)(n.PanelRow,{className:"yokoi-sidebar__panel-row yokoi-sidebar__panel-row--empty",children:(0,b.jsx)("p",{className:"yokoi-sidebar__empty",children:(0,t.__)("No blocks match your search.","yokoi")})}),_.map(([e,o])=>{const i=a[e]?.title||e,s=a[e]?.description;return(0,b.jsx)(n.PanelRow,{className:"yokoi-sidebar__panel-row",children:(0,b.jsx)(n.ToggleControl,{label:i,checked:Boolean(o),onChange:()=>r(e),help:s,__nextHasNoMarginBottom:!0})},e)})]})})},_=window.yokoiSettings||{},h=Array.isArray(_.blocks)?_.blocks:[],k=(e=[])=>e.reduce((e,o)=>(o?.name&&(e[o.name]=o),e),{}),g=(e,o)=>{const i=((e={})=>({blocks_enabled:Object.fromEntries(Object.keys(e).map(e=>[e,!0])),default_configs:{},visibility_controls:{}}))(o),s={...i,...e||{}};return s.blocks_enabled={...i.blocks_enabled,...e?.blocks_enabled||{}},Object.keys(o).forEach(e=>{"boolean"!=typeof s.blocks_enabled[e]&&(s.blocks_enabled[e]=Boolean(i.blocks_enabled[e]))}),s.default_configs={...i.default_configs,...e?.default_configs||{}},s.visibility_controls={...i.visibility_controls,...e?.visibility_controls||{}},s};_?.nonce&&a().use(a().createNonceMiddleware(_.nonce));let y=null,p=null;const m=()=>(0,b.jsxs)("svg",{className:"yokoi-sidebar__icon",width:"20",height:"20",viewBox:"0 0 163.3 163.3",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",children:[(0,b.jsx)("path",{d:"M145.1,38.5c0-1.2-.9-2.1-2.1-2.1H20.3c-1.2,0-2.1.9-2.1,2.1v104.4c0,1.2.9,2.1,2.1,2.1h122.7c1.2,0,2.1-.9,2.1-2.1V38.5ZM0,161.9V1.5C.6.5,1.8,0,3.5,0,51.6,0,98.1,0,143.1,0c1.2,0,2.1.9,2.1,2.1v13.9c0,1.2.9,2.1,2.1,2.2.6,0,5.2,0,13.9,0,1.4,0,2.1.8,2.1,2.4,0,3.5,0,50,0,139.5,0,2.2-.6,3.1-2.8,3.1-53,0-105.9,0-158.9,0,0,0-.2,0-.2,0l-1.4-1.3",fill:"#231f20"}),(0,b.jsx)("path",{d:"M75.2,86.9c0,1.2-.9,2.1-2.1,2.1h-8.8c-1.2,0-2.1-1-2.1-2.1v-18.2c0-1.2,1-2.1,2.1-2.1h8.8c1.2,0,2.1,1,2.1,2.1v18.2Z",fill:"#231f20"}),(0,b.jsx)("path",{d:"M101.1,86.9c0,1.2-.9,2.1-2.1,2.1h-8.8c-1.2,0-2.1-.9-2.1-2.1v-18.2c0-1.2.9-2.1,2.1-2.1h8.8c1.2,0,2.1.9,2.1,2.1v18.2Z",fill:"#231f20"}),(0,b.jsx)("path",{d:"M81.6,101.8c19.6,0,29.5,0,29.7,0,1.1,0,1.9-.9,1.9-2v-8.1c0-1.1.9-2,2-2h9c1.1,0,2,.9,2,2v8.9c0,1.1-.9,2.1-2.1,2.1h-8.2c-1.1,0-1.9.8-1.9,1.9v8.1c0,1.1-.9,1.9-1.9,2,0,0-10.2,0-30.5,0-20.3,0-30.5,0-30.5,0-1.1,0-1.9-1-1.9-2v-8.1c0-1-.9-1.9-2-1.9h-8.2c-1.1,0-2.1-.9-2.1-2.1v-8.9c0-1.1.9-2,2-2h9c1.1,0,2,.9,2,2v8.1c0,1.1.9,1.9,1.9,2,.2,0,10,0,29.7,0Z",fill:"#231f20"})]}),v=e=>e?"string"==typeof e?e:e?.message?e.message:(0,t.__)("An unexpected error occurred.","yokoi"):"",f=()=>{if(!y||!p)return null;const[e,o]=(0,r.useState)(()=>k(h)),[i,s]=(0,r.useState)(!1),[l,c]=(0,r.useState)(null),[d,f]=(0,r.useState)(""),w=(0,r.useCallback)((o,i=e)=>g(o,i),[e]),[j,x]=(0,r.useState)(g(_.settings,e)),[S,O]=(0,r.useState)(!_.settings),[C,N]=(0,r.useState)(!1),[P,M]=(0,r.useState)(!1),[E,B]=(0,r.useState)(null),[R,T]=(0,r.useState)(!1),L=!1!==_?.capabilities?.canManage,Y=_?.restEndpoint,A=_?.blocksEndpoint,D=(0,r.useCallback)((o,i=e)=>w(o,i),[w,e]),V=(0,r.useCallback)(()=>{Y&&L?(O(!0),a()({url:Y,method:"GET"}).then(e=>{x(D(e)),M(!1),R&&T(!1),B(null)}).catch(e=>{B(e)}).finally(()=>{O(!1)})):O(!1)},[Y,L,D,R]);(0,r.useEffect)(()=>{_.settings||V()},[V]),(0,r.useEffect)(()=>{A&&(s(!0),c(null),a()({url:A,method:"GET"}).then(e=>{const i=k(Array.isArray(e)?e:[]);o(i),x(e=>D(e,i))}).catch(e=>{c(e)}).finally(()=>{s(!1)}))},[A,D]);const Z=(0,r.useMemo)(()=>j?.blocks_enabled||{},[j]),F=(0,r.useCallback)(e=>{x(o=>{const i={...o.blocks_enabled,[e]:!o.blocks_enabled?.[e]};return{...o,blocks_enabled:i}}),M(!0)},[]),I=(0,r.useCallback)(()=>{Y&&(N(!0),B(null),a()({url:Y,method:"POST",data:{blocks_enabled:j.blocks_enabled,default_configs:j.default_configs,visibility_controls:j.visibility_controls}}).then(e=>{const o=D(e?.data||e);x(o),M(!1),T(!0),setTimeout(()=>T(!1),3e3)}).catch(e=>{B(e)}).finally(()=>{N(!1)}))},[Y,j,D]);return L?(0,b.jsxs)(r.Fragment,{children:[(0,b.jsx)(p,{target:"yokoi-settings-sidebar",icon:(0,b.jsx)(m,{}),children:(0,t.__)("Yokoi Settings","yokoi")}),(0,b.jsxs)(y,{name:"yokoi-settings-sidebar",title:(0,t.__)("Yokoi Settings","yokoi"),icon:(0,b.jsx)(m,{}),children:[S&&(0,b.jsxs)("div",{className:"yokoi-sidebar__loading",children:[(0,b.jsx)(n.Spinner,{}),(0,b.jsx)("p",{children:(0,t.__)("Loading settings…","yokoi")})]}),R&&(0,b.jsx)(n.Notice,{status:"success",isDismissible:!1,children:(0,t.__)("Settings saved successfully.","yokoi")}),E&&(0,b.jsx)(n.Notice,{status:"error",onRemove:()=>B(null),children:v(E)}),(0,b.jsx)(u,{isLoading:i,error:l,searchValue:d,onSearchChange:f,blocksEnabled:Z,blockDefinitions:e,onToggle:F}),(0,b.jsxs)("div",{className:"yokoi-sidebar__footer",children:[(0,b.jsx)(n.Button,{variant:"secondary",onClick:V,isBusy:S,disabled:C,children:(0,t.__)("Reset","yokoi")}),(0,b.jsx)(n.Button,{variant:"primary",onClick:I,isBusy:C,disabled:!P||C,children:C?(0,t.__)("Saving…","yokoi"):(0,t.__)("Save Settings","yokoi")})]})]})]}):(0,b.jsxs)(r.Fragment,{children:[(0,b.jsx)(PluginSidebarMoreMenuItem,{target:"yokoi-settings-sidebar",icon:"admin-settings",children:(0,t.__)("Yokoi Settings","yokoi")}),(0,b.jsx)(PluginSidebar,{name:"yokoi-settings-sidebar",title:(0,t.__)("Yokoi Settings","yokoi"),icon:"admin-settings",children:(0,b.jsx)("p",{children:(0,t.__)("You do not have permission to manage Yokoi settings.","yokoi")})})]})};d()(()=>{const e=window?.wp?.editor,o=window?.wp?.editSite,i=document?.body?.classList?.contains("site-editor-php")||document?.body?.classList?.contains("edit-site");if(!o||!i)return;const n=e?.PluginSidebar&&e?.PluginSidebarMoreMenuItem?e:o,{PluginSidebar:l,PluginSidebarMoreMenuItem:a}=n||{};l&&a&&(y=l,p=a,(0,s.registerPlugin)("yokoi-settings-sidebar",{render:f,icon:m}))})}},i={};function s(e){var n=i[e];if(void 0!==n)return n.exports;var l=i[e]={exports:{}};return o[e](l,l.exports,s),l.exports}s.m=o,e=[],s.O=(o,i,n,l)=>{if(!i){var a=1/0;for(d=0;d<e.length;d++){for(var[i,n,l]=e[d],t=!0,r=0;r<i.length;r++)(!1&l||a>=l)&&Object.keys(s.O).every(e=>s.O[e](i[r]))?i.splice(r--,1):(t=!1,l<a&&(a=l));if(t){e.splice(d--,1);var c=n();void 0!==c&&(o=c)}}return o}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[i,n,l]},s.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return s.d(o,{a:o}),o},s.d=(e,o)=>{for(var i in o)s.o(o,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:o[i]})},s.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),(()=>{var e={61:0,118:0};s.O.j=o=>0===e[o];var o=(o,i)=>{var n,l,[a,t,r]=i,c=0;if(a.some(o=>0!==e[o])){for(n in t)s.o(t,n)&&(s.m[n]=t[n]);if(r)var d=r(s)}for(o&&o(i);c<a.length;c++)l=a[c],s.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return s.O(d)},i=globalThis.webpackChunkyokoi=globalThis.webpackChunkyokoi||[];i.forEach(o.bind(null,0)),i.push=o.bind(null,i.push.bind(i))})();var n=s.O(void 0,[118],()=>s(661));n=s.O(n)})();