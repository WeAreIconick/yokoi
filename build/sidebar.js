(()=>{var e,t={2:(e,t,o)=>{var r=o(2199),n=o(4664),i=o(5950);e.exports=function(e){return r(e,i,n)}},79:(e,t,o)=>{var r=o(3702),n=o(80),i=o(4739),a=o(8655),s=o(1175);function c(e){var t=-1,o=null==e?0:e.length;for(this.clear();++t<o;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=n,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,e.exports=c},80:(e,t,o)=>{var r=o(6025),n=Array.prototype.splice;e.exports=function(e){var t=this.__data__,o=r(t,e);return!(o<0||(o==t.length-1?t.pop():n.call(t,o,1),--this.size,0))}},270:(e,t,o)=>{var r=o(7068),n=o(346);e.exports=function e(t,o,i,a,s){return t===o||(null==t||null==o||!n(t)&&!n(o)?t!=t&&o!=o:r(t,o,i,a,e,s))}},289:(e,t,o)=>{var r=o(2651);e.exports=function(e){return r(this,e).get(e)}},294:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},317:e=>{e.exports=function(e){var t=-1,o=Array(e.size);return e.forEach(function(e,r){o[++t]=[r,e]}),o}},346:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},361:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,o){var r=typeof e;return!!(o=null==o?9007199254740991:o)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<o}},392:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},659:(e,t,o)=>{var r=o(1873),n=Object.prototype,i=n.hasOwnProperty,a=n.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=i.call(e,s),o=e[s];try{e[s]=void 0;var r=!0}catch(e){}var n=a.call(e);return r&&(t?e[s]=o:delete e[s]),n}},689:(e,t,o)=>{var r=o(2),n=Object.prototype.hasOwnProperty;e.exports=function(e,t,o,i,a,s){var c=1&o,l=r(e),u=l.length;if(u!=r(t).length&&!c)return!1;for(var d=u;d--;){var p=l[d];if(!(c?p in t:n.call(t,p)))return!1}var f=s.get(e),h=s.get(t);if(f&&h)return f==t&&h==e;var v=!0;s.set(e,t),s.set(t,e);for(var y=c;++d<u;){var g=e[p=l[d]],b=t[p];if(i)var _=c?i(b,g,p,t,e,s):i(g,b,p,e,t,s);if(!(void 0===_?g===b||a(g,b,o,i,s):_)){v=!1;break}y||(y="constructor"==p)}if(v&&!y){var x=e.constructor,w=t.constructor;x==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(v=!1)}return s.delete(e),s.delete(t),v}},695:(e,t,o)=>{var r=o(8096),n=o(2428),i=o(6449),a=o(3656),s=o(361),c=o(7167),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var o=i(e),u=!o&&n(e),d=!o&&!u&&a(e),p=!o&&!u&&!d&&c(e),f=o||u||d||p,h=f?r(e.length,String):[],v=h.length;for(var y in e)!t&&!l.call(e,y)||f&&("length"==y||d&&("offset"==y||"parent"==y)||p&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||s(y,v))||h.push(y);return h}},938:e=>{e.exports=function(e){var t=this.__data__,o=t.delete(e);return this.size=t.size,o}},945:(e,t,o)=>{var r=o(79),n=o(8223),i=o(3661);e.exports=function(e,t){var o=this.__data__;if(o instanceof r){var a=o.__data__;if(!n||a.length<199)return a.push([e,t]),this.size=++o.size,this;o=this.__data__=new i(a)}return o.set(e,t),this.size=o.size,this}},1042:(e,t,o)=>{var r=o(6110)(Object,"create");e.exports=r},1175:(e,t,o)=>{var r=o(6025);e.exports=function(e,t){var o=this.__data__,n=r(o,e);return n<0?(++this.size,o.push([e,t])):o[n][1]=t,this}},1380:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},1420:(e,t,o)=>{var r=o(79);e.exports=function(){this.__data__=new r,this.size=0}},1459:e=>{e.exports=function(e){return this.__data__.has(e)}},1549:(e,t,o)=>{var r=o(2032),n=o(3862),i=o(6721),a=o(2749),s=o(5749);function c(e){var t=-1,o=null==e?0:e.length;for(this.clear();++t<o;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=n,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,e.exports=c},1873:(e,t,o)=>{var r=o(9325).Symbol;e.exports=r},1882:(e,t,o)=>{var r=o(2552),n=o(3805);e.exports=function(e){if(!n(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1986:(e,t,o)=>{var r=o(1873),n=o(7828),i=o(5288),a=o(5911),s=o(317),c=o(4247),l=r?r.prototype:void 0,u=l?l.valueOf:void 0;e.exports=function(e,t,o,r,l,d,p){switch(o){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new n(e),new n(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var f=s;case"[object Set]":var h=1&r;if(f||(f=c),e.size!=t.size&&!h)return!1;var v=p.get(e);if(v)return v==t;r|=2,p.set(e,t);var y=a(f(e),f(t),r,l,d,p);return p.delete(e),y;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},2032:(e,t,o)=>{var r=o(1042);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},2199:(e,t,o)=>{var r=o(4528),n=o(6449);e.exports=function(e,t,o){var i=t(e);return n(e)?i:r(i,o(e))}},2404:(e,t,o)=>{var r=o(270);e.exports=function(e,t){return r(e,t)}},2428:(e,t,o)=>{var r=o(7534),n=o(346),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return n(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=c},2552:(e,t,o)=>{var r=o(1873),n=o(659),i=o(9350),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?n(e):i(e)}},2651:(e,t,o)=>{var r=o(4218);e.exports=function(e,t){var o=e.__data__;return r(t)?o["string"==typeof t?"string":"hash"]:o.map}},2749:(e,t,o)=>{var r=o(1042),n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:n.call(t,e)}},2804:(e,t,o)=>{var r=o(6110)(o(9325),"Promise");e.exports=r},2949:(e,t,o)=>{var r=o(2651);e.exports=function(e,t){var o=r(this,e),n=o.size;return o.set(e,t),this.size+=o.size==n?0:1,this}},3040:(e,t,o)=>{var r=o(1549),n=o(79),i=o(8223);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||n),string:new r}}},3345:e=>{e.exports=function(){return[]}},3605:e=>{e.exports=function(e){return this.__data__.get(e)}},3650:(e,t,o)=>{var r=o(4335)(Object.keys,Object);e.exports=r},3656:(e,t,o)=>{e=o.nmd(e);var r=o(9325),n=o(9935),i=t&&!t.nodeType&&t,a=i&&e&&!e.nodeType&&e,s=a&&a.exports===i?r.Buffer:void 0,c=(s?s.isBuffer:void 0)||n;e.exports=c},3661:(e,t,o)=>{var r=o(3040),n=o(7670),i=o(289),a=o(4509),s=o(2949);function c(e){var t=-1,o=null==e?0:e.length;for(this.clear();++t<o;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=n,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,e.exports=c},3702:e=>{e.exports=function(){this.__data__=[],this.size=0}},3805:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},3862:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},4218:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},4247:e=>{e.exports=function(e){var t=-1,o=Array(e.size);return e.forEach(function(e){o[++t]=e}),o}},4248:e=>{e.exports=function(e,t){for(var o=-1,r=null==e?0:e.length;++o<r;)if(t(e[o],o,e))return!0;return!1}},4335:e=>{e.exports=function(e,t){return function(o){return e(t(o))}}},4509:(e,t,o)=>{var r=o(2651);e.exports=function(e){return r(this,e).has(e)}},4528:e=>{e.exports=function(e,t){for(var o=-1,r=t.length,n=e.length;++o<r;)e[n+o]=t[o];return e}},4664:(e,t,o)=>{var r=o(9770),n=o(3345),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),r(a(e),function(t){return i.call(e,t)}))}:n;e.exports=s},4739:(e,t,o)=>{var r=o(6025);e.exports=function(e){var t=this.__data__,o=r(t,e);return o<0?void 0:t[o][1]}},4840:(e,t,o)=>{var r="object"==typeof o.g&&o.g&&o.g.Object===Object&&o.g;e.exports=r},4894:(e,t,o)=>{var r=o(1882),n=o(294);e.exports=function(e){return null!=e&&n(e.length)&&!r(e)}},4901:(e,t,o)=>{var r=o(2552),n=o(294),i=o(346),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&n(e.length)&&!!a[r(e)]}},5083:(e,t,o)=>{var r=o(1882),n=o(7296),i=o(3805),a=o(7473),s=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,u=c.toString,d=l.hasOwnProperty,p=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||n(e))&&(r(e)?p:s).test(a(e))}},5288:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},5432:(e,t,o)=>{"use strict";const r=window.wp.plugins,n=window.wp.components,i=window.wp.apiFetch;var a=o.n(i);const s=window.wp.i18n,c=window.wp.element,l=window.wp.data,u=window.wp.domReady;var d=o.n(u);const p=window.wp.url;var f=o(2404),h=o.n(f);const v=window.ReactJSXRuntime,y=({isLoading:e=!1,isLoadingMore:t=!1,error:o=null,searchValue:r="",onSearchChange:i=()=>{},blocksEnabled:a={},blockDefinitions:c={},onToggle:l,hasMore:u=!1,onLoadMore:d=()=>{},disabled:p=!1})=>{var f;const h=(Object.keys(c).length?Object.keys(c):Object.keys(a)).map(e=>{var t;return[e,null===(t=a?.[e])||void 0===t||t]}),y=null!==(f=r?.toLowerCase?.())&&void 0!==f?f:"",g=h.filter(([e])=>!y||`${c[e]?.title||e} ${c[e]?.description||""}`.toLowerCase().includes(y));return(0,v.jsx)(n.Panel,{children:(0,v.jsxs)(n.PanelBody,{title:(0,s.__)("Enable/Disable Blocks","yokoi"),initialOpen:!0,children:[(0,v.jsx)(n.SearchControl,{value:r,onChange:i,placeholder:(0,s.__)("Search blocks…","yokoi"),disabled:p}),e&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(n.Spinner,{}),(0,v.jsx)("span",{children:(0,s.__)("Loading block catalog…","yokoi")})]}),o&&!e&&(0,v.jsx)(n.Notice,{status:"error",children:o?.message||(0,s.__)("Unable to load block catalog.","yokoi")}),0===h.length&&(0,v.jsx)("p",{children:(0,s.__)("No blocks registered yet. Blocks will appear here once available.","yokoi")}),!e&&0===g.length&&h.length>0&&(0,v.jsx)("p",{children:(0,s.__)("No blocks match your search.","yokoi")}),g.map(([e,t])=>{const o=c[e]?.title||e,r=c[e]?.description;return(0,v.jsx)(n.ToggleControl,{label:o,checked:Boolean(t),onChange:()=>l(e),help:r,__nextHasNoMarginBottom:!0,disabled:p},e)}),u&&!e&&(0,v.jsx)(n.Button,{variant:"secondary",onClick:d,isBusy:t,disabled:t||p,children:t?(0,s.__)("Loading…","yokoi"):(0,s.__)("Load more blocks","yokoi")})]})})},g="YOKOI_DEBUG",b=()=>{if("undefined"==typeof window)return!1;let e=null;try{e=window.localStorage?.getItem(g)}catch(e){}if(void 0===window.YOKOI_DEBUG&&(window.YOKOI_DEBUG=null===e||"true"===e),window.YOKOI_DEBUG&&"true"!==e)try{window.localStorage?.setItem(g,"true")}catch(e){}return Boolean(window.YOKOI_DEBUG)};b();const _=(...e)=>{if((e=>{"undefined"!=typeof window&&(Array.isArray(window.YOKOI_DEBUG_LOGS)||(window.YOKOI_DEBUG_LOGS=[]),window.YOKOI_DEBUG_LOGS.push(e))})(e),b()){try{window.localStorage?.setItem(g,"true")}catch(e){}console.log("[Yokoi]",...e)}},x=window.yokoiSettings||{},w=Array.isArray(x.blocks)?x.blocks:[],j="yokoi-settings-sidebar",k=(e=[])=>e.reduce((e,t)=>(t?.name&&(e[t.name]=t),e),{}),m=(e={})=>({blocks_enabled:Object.fromEntries(Object.keys(e).map(e=>[e,!0])),default_configs:{},visibility_controls:{},date_now_api_key:""}),O=(e,t)=>{const o=m(t),r={...o,...e||{}};return r.blocks_enabled={...o.blocks_enabled,...e?.blocks_enabled||{}},Object.keys(t).forEach(e=>{"boolean"!=typeof r.blocks_enabled[e]&&(r.blocks_enabled[e]=Boolean(o.blocks_enabled[e]))}),r.default_configs={...o.default_configs,...e?.default_configs||{}},r.visibility_controls={...o.visibility_controls,...e?.visibility_controls||{}},r.date_now_api_key="string"==typeof e?.date_now_api_key?e.date_now_api_key:o.date_now_api_key,r};x?.nonce&&a().use(a().createNonceMiddleware(x.nonce));let S=null,E=null;const P=(e={})=>(0,v.jsxs)("svg",{className:"yokoi-sidebar__icon",width:"20",height:"20",viewBox:"0 0 163.3 163.3",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",...e,children:[(0,v.jsx)("path",{d:"M145.1,38.5c0-1.2-.9-2.1-2.1-2.1H20.3c-1.2,0-2.1.9-2.1,2.1v104.4c0,1.2.9,2.1,2.1,2.1h122.7c1.2,0,2.1-.9,2.1-2.1V38.5ZM0,161.9V1.5C.6.5,1.8,0,3.5,0,51.6,0,98.1,0,143.1,0c1.2,0,2.1.9,2.1,2.1v13.9c0,1.2.9,2.1,2.1,2.2.6,0,5.2,0,13.9,0,1.4,0,2.1.8,2.1,2.4,0,3.5,0,50,0,139.5,0,2.2-.6,3.1-2.8,3.1-53,0-105.9,0-158.9,0,0,0-.2,0-.2,0l-1.4-1.3",fill:"currentColor"}),(0,v.jsx)("path",{d:"M75.2,86.9c0,1.2-.9,2.1-2.1,2.1h-8.8c-1.2,0-2.1-1-2.1-2.1v-18.2c0-1.2,1-2.1,2.1-2.1h8.8c1.2,0,2.1,1,2.1,2.1v18.2Z",fill:"currentColor"}),(0,v.jsx)("path",{d:"M101.1,86.9c0,1.2-.9,2.1-2.1,2.1h-8.8c-1.2,0-2.1-.9-2.1-2.1v-18.2c0-1.2.9-2.1,2.1-2.1h8.8c1.2,0,2.1.9,2.1,2.1v18.2Z",fill:"currentColor"}),(0,v.jsx)("path",{d:"M81.6,101.8c19.6,0,29.5,0,29.7,0,1.1,0,1.9-.9,1.9-2v-8.1c0-1.1.9-2,2-2h9c1.1,0,2,.9,2,2v8.9c0,1.1-.9,2.1-2.1,2.1h-8.2c-1.1,0-1.9.8-1.9,1.9v8.1c0,1.1-.9,1.9-1.9,2,0,0-10.2,0-30.5,0-20.3,0-30.5,0-30.5,0-1.1,0-1.9-1-1.9-2v-8.1c0-1-.9-1.9-2-1.9h-8.2c-1.1,0-2.1-.9-2.1-2.1v-8.9c0-1.1.9-2,2-2h9c1.1,0,2,.9,2,2v8.1c0,1.1.9,1.9,1.9,2,.2,0,10,0,29.7,0Z",fill:"currentColor"})]}),C=()=>{var e,t;if(!S||!E)return null;const[o,r]=(0,c.useState)(()=>k(w)),[i,u]=(0,c.useState)(!1),[d,f]=(0,c.useState)(null),[g,b]=(0,c.useState)(""),[j,C]=(0,c.useState)(""),[R,A]=(0,c.useState)({page:0,totalPages:0,search:""}),[M,B]=(0,c.useState)(!1);(0,c.useEffect)(()=>{const e=setTimeout(()=>{C(g)},300);return()=>clearTimeout(e)},[g]);const T=x?.settingsOption||"yokoi_settings",D=!1!==x?.capabilities?.canManage,z=x?.blocksEndpoint,{editEntityRecord:I,receiveEntityRecords:F}=(0,l.useDispatch)("core"),{__experimentalResolveSelect:L,invalidateResolution:G}=(0,l.useDispatch)("core/data"),N=(0,c.useCallback)(({invalidate:e=!1}={})=>{if(!L)return Promise.resolve();const t=["root","option",T];return e&&G&&G("core","getEntityRecord",t),L("core","getEntityRecord",t).catch(e=>{_("Failed to resolve entity config",e)})},[L,T,G]),{addEntities:U,receiveEntityRecords:Y,receiveEntityConfig:V}=(0,l.useDispatch)("core"),$=(0,c.useRef)(!1),K=(0,c.useRef)(!1),W=(0,c.useRef)(null),{optionValue:Z,persistedOptionValue:X,optionDirty:q,optionResolving:H,optionSaving:J,entityConfig:Q,hasEntityConfigSelector:ee}=(0,l.useSelect)(e=>{const t=e("core"),o=t.getEntityRecord("root","option",T),r=t.getEditedEntityRecord?t.getEditedEntityRecord("root","option",T):null;return{optionValue:r&&Object.prototype.hasOwnProperty.call(r,"value")?r.value:o?.value,persistedOptionValue:o?.value,optionDirty:!!t.hasEditsForEntityRecord&&t.hasEditsForEntityRecord("root","option",T),optionResolving:!!t.isResolving&&t.isResolving("getEntityRecord",["root","option",T]),optionSaving:!!t.isSavingEntityRecord&&t.isSavingEntityRecord("root","option",T),entityConfig:t.getEntityConfig?t.getEntityConfig("root","option",T):null,hasEntityConfigSelector:"function"==typeof t.getEntityConfig}},[T]),te=void 0!==Z||void 0!==X,oe=void 0!==Z?Z:void 0!==X?X:null!==(e=x.settings)&&void 0!==e?e:m(o),re=(0,c.useMemo)(()=>O(oe,o),[oe,o]),ne=(0,c.useRef)(!1),ie=(0,c.useRef)(!1),ae=ee,se=!ae||Boolean(Q),ce=(0,c.useCallback)((e,t=0)=>{const o=t+1,r=Math.min(5e3,1e3*o);window.setTimeout(()=>{try{I("root","option",T,{value:e}),_("Delayed seed succeeded",{attempt:o}),W.current=null}catch(t){_("Delayed seed attempt failed",t,{attempt:o}),o<5&&ce(e,o)}},r)},[I,T]);(0,c.useEffect)(()=>{if(!ae)return void _("Entity config selector unavailable; assuming ready state");if(se)return;var e;_("Resolving entity config for option",T),U&&V&&!$.current&&(V("root","option",T,{name:T,kind:"root",label:T,rest_base:T}),U([{name:T,kind:"root",baseURL:"/wp/v2/settings",key:T,plural:T,label:T}]),$.current=!0),Y&&Y("root","option",[{id:T,name:T,value:null!==(e=x.settings)&&void 0!==e?e:{}}],{name:T}),N({invalidate:!0}),K.current||(K.current=!0,_("Priming WP settings endpoint"),a()({path:"/wp/v2/settings",method:"GET"}).catch(e=>{_("Failed to prime settings endpoint",e)}));const t=window.setTimeout(()=>{se||(_("Retrying entity config resolution for option",T),N({invalidate:!0}))},1e3);return()=>window.clearTimeout(t)},[se,T,U,N,Y,ae]),(0,c.useEffect)(()=>{if(se&&W.current){const e=W.current;W.current=null;try{I("root","option",T,{value:e}),_("Pending seed applied after entity ready")}catch(t){_("Pending seed failed after entity ready; retrying",t),ce(e)}}},[se,I,T,ce]),(0,c.useEffect)(()=>{if(!ae&&!te&&Object.keys(o).length>0&&!ie.current){var e;const t=O(null!==(e=x.settings)&&void 0!==e?e:m(o),o);_("Seeding fallback option (no entity selector available)",t),ie.current=!0,F&&F("root","option",[{id:T,name:T,value:t}],{name:T})}},[ae,te,o,x.settings,T,F]),(0,c.useEffect)(()=>{_("Option status",{optionValue:Z,persistedOptionValue:X,hasFetchedOption:te})},[Z,X,te]),(0,c.useEffect)(()=>{if(se||_("Entity config not ready; proceeding with fallback seeding"),!te&&!ie.current&&Object.keys(o).length>0){var e;const t=O(null!==(e=x.settings)&&void 0!==e?e:m(o),o);return _("Seeding fallback option value",t),ie.current=!0,void(se?I("root","option",T,{value:t}):F&&(_("Entity config missing; seeding via receiveEntityRecords"),W.current=t,F("root","option",[{id:T,name:T,value:t}],{name:T}),ce(t)))}if(!ne.current&&void 0===Z&&void 0!==X){const e=O(X,o);return _("Seeding edited option with persisted value"),ne.current=!0,void I("root","option",T,{value:e})}se&&void 0!==Z&&!h()(Z,re)&&(_("Syncing edited option to normalized snapshot"),I("root","option",T,{value:re}))},[Z,X,re,T,I,F,o,se]),(0,c.useEffect)(()=>{var e;e=re,"undefined"!=typeof window&&(window.yokoiSettings={...window.yokoiSettings||{},settings:e},window.dispatchEvent(new CustomEvent("yokoi:settings-updated",{detail:e})))},[re]);const le=!te,ue=te,de=i&&ue,pe=re.blocks_enabled||{},fe=re.date_now_api_key||"",he=(0,c.useCallback)(e=>{if(!se)return void _("applySettingsChange bail: entity config not ready");if(!ue)return void _("applySettingsChange bail: option not ready");const t=O(e(re),o);I("root","option",T,{value:t})},[I,T,re,o,ue,se]),ve=(0,c.useCallback)(async({search:e="",page:t=1,append:o=!1}={})=>{if(z){f(null),o?B(!0):u(!0);try{const n=(0,p.addQueryArgs)(z,{per_page:100,page:t,...e?{search:e}:{}}),i=await a()({url:n,method:"GET",parse:!1}),s=await i.json();if(!i.ok)throw s;const c=parseInt(i.headers.get("X-WP-Total"),10)||s.length||0,l=parseInt(i.headers.get("X-WP-TotalPages"),10)||Math.max(1,Math.ceil(c/100)),u=k(Array.isArray(s)?s:[]);let d=u;r(e=>(d=o?{...e,...u}:u,d)),A({page:t,totalPages:l,search:e})}catch(t){f(t),o||A({page:0,totalPages:0,search:e})}finally{o?B(!1):u(!1)}}},[z]);(0,c.useEffect)(()=>{z&&ve({search:j,page:1,append:!1})},[z,j,ve]);const ye=(0,c.useCallback)(e=>{he(t=>({...t,blocks_enabled:{...t.blocks_enabled,[e]:!t.blocks_enabled?.[e]}}))},[he]),ge=(0,c.useCallback)(e=>{he(t=>({...t,date_now_api_key:e}))},[he]),be=R.page>0&&R.page<R.totalPages,_e=null===(t=pe?.["yokoi/date-now"])||void 0===t||t,xe=(0,c.useCallback)(()=>{z&&(R.page>=R.totalPages||ve({search:R.search,page:R.page+1,append:!0}))},[z,R,ve]),we=(0,c.useCallback)(()=>{var e;if(!ue)return;const t=null!==(e=null!=X?X:x.settings)&&void 0!==e?e:m(o),r=O(t,o);I("root","option",T,{value:r})},[X,I,T,o,ue,x]),je=q,ke=J||i;return D?(0,v.jsxs)(c.Fragment,{children:[(0,v.jsx)(E,{target:"yokoi-settings-sidebar",icon:(0,v.jsx)(P,{}),children:(0,s.__)("Yokoi Settings","yokoi")}),(0,v.jsx)(S,{name:"yokoi-settings-sidebar",title:(0,s.__)("Yokoi Settings","yokoi"),icon:(0,v.jsx)(P,{}),children:(0,v.jsx)(n.Flex,{direction:"column",gap:6,children:le?(0,v.jsxs)("div",{className:"yokoi-sidebar__loading-shell",children:[(0,v.jsxs)("div",{className:"yokoi-sidebar__loading-panel",children:[(0,v.jsx)(n.Spinner,{}),(0,v.jsx)("p",{children:(0,s.__)("Preparing Yokoi settings…","yokoi")}),(0,v.jsx)("div",{className:"yokoi-sidebar__loading-bar"}),(0,v.jsx)("div",{className:"yokoi-sidebar__loading-bar yokoi-sidebar__loading-bar--short"})]}),(0,v.jsxs)("div",{className:"yokoi-sidebar__loading-panel yokoi-sidebar__loading-panel--secondary",children:[(0,v.jsx)("div",{className:"yokoi-sidebar__loading-bar"}),(0,v.jsx)("div",{className:"yokoi-sidebar__loading-bar yokoi-sidebar__loading-bar--short"})]})]}):(0,v.jsxs)(v.Fragment,{children:[de&&(0,v.jsxs)(n.Flex,{direction:"column",gap:4,children:[(0,v.jsx)(n.Spinner,{}),(0,v.jsx)("p",{children:(0,s.__)("Updating settings…","yokoi")})]}),(0,v.jsx)(n.Notice,{status:"info",isDismissible:!1,children:(0,s.__)("Yokoi ships a suite of high-performance blocks built for modern WordPress sites. Use the controls below to enable blocks and fine-tune their behavior.","yokoi")}),(0,v.jsx)(n.TabPanel,{initialTabName:"catalog",tabs:[{name:"catalog",title:(0,s.__)("Blocks","yokoi")},{name:"settings",title:(0,s.__)("Settings","yokoi")}],children:e=>"settings"===e.name?(0,v.jsx)(n.Flex,{direction:"column",gap:4,children:_e?(0,v.jsx)(n.TextControl,{label:(0,s.__)("Google Calendar API key","yokoi"),value:fe,onChange:ge,placeholder:(0,s.__)("Paste your Google API key","yokoi"),help:(0,s.__)("Create a Maps Platform project, enable Calendar API access, and paste the key here.","yokoi"),disabled:!ue||ke}):(0,v.jsx)(n.Notice,{status:"info",isDismissible:!1,children:(0,s.__)("Enable the Date.now block to configure Google Calendar access.","yokoi")})}):(0,v.jsx)(y,{isLoading:i,isLoadingMore:M,error:d,searchValue:g,onSearchChange:b,hasMore:be,onLoadMore:xe,blocksEnabled:pe,blockDefinitions:o,onToggle:ye,disabled:!ue||ke})}),(0,v.jsx)(n.Flex,{justify:"flex-end",gap:2,children:(0,v.jsx)(n.Button,{variant:"secondary",onClick:we,isBusy:ke,disabled:ke||!je||!ue,children:(0,s.__)("Reset","yokoi")})})]})})})]}):(0,v.jsxs)(c.Fragment,{children:[(0,v.jsx)(PluginSidebarMoreMenuItem,{target:"yokoi-settings-sidebar",icon:"admin-settings",children:(0,s.__)("Yokoi Settings","yokoi")}),(0,v.jsx)(PluginSidebar,{name:"yokoi-settings-sidebar",title:(0,s.__)("Yokoi Settings","yokoi"),icon:"admin-settings",children:(0,v.jsx)("p",{children:(0,s.__)("You do not have permission to manage Yokoi settings.","yokoi")})})]})};d()(()=>{const e=window?.wp?.editor,t=window?.wp?.editSite,o=document?.body?.classList?.contains("site-editor-php")||document?.body?.classList?.contains("edit-site");if(!t||!o)return;const n=e?.PluginSidebar&&e?.PluginSidebarMoreMenuItem?e:t,{PluginSidebar:i,PluginSidebarMoreMenuItem:a}=n||{};i&&a&&(S=i,E=a,(0,r.registerPlugin)("yokoi-settings-sidebar",{render:C,icon:P}),(()=>{if(!(()=>{try{return"1"===new URLSearchParams(window.location.search).get("yokoi_sidebar")}catch(e){return!1}})())return;let e=5;const t=()=>{(()=>{const e=window?.wp?.data;if(!e?.dispatch)return;const t=e.dispatch("core/edit-site");if(t?.openGeneralSidebar)return void t.openGeneralSidebar(`edit-site/plugin-sidebar/${j}`);const o=e.dispatch("core/edit-post");o?.openGeneralSidebar&&o.openGeneralSidebar(`edit-post/plugin-sidebar/${j}`)})(),e-=1,e>0&&window.setTimeout(t,300)};window.setTimeout(t,150)})())})},5481:(e,t,o)=>{var r=o(9325)["__core-js_shared__"];e.exports=r},5527:e=>{var t=Object.prototype;e.exports=function(e){var o=e&&e.constructor;return e===("function"==typeof o&&o.prototype||t)}},5580:(e,t,o)=>{var r=o(6110)(o(9325),"DataView");e.exports=r},5749:(e,t,o)=>{var r=o(1042);e.exports=function(e,t){var o=this.__data__;return this.size+=this.has(e)?0:1,o[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},5861:(e,t,o)=>{var r=o(5580),n=o(8223),i=o(2804),a=o(6545),s=o(8303),c=o(2552),l=o(7473),u="[object Map]",d="[object Promise]",p="[object Set]",f="[object WeakMap]",h="[object DataView]",v=l(r),y=l(n),g=l(i),b=l(a),_=l(s),x=c;(r&&x(new r(new ArrayBuffer(1)))!=h||n&&x(new n)!=u||i&&x(i.resolve())!=d||a&&x(new a)!=p||s&&x(new s)!=f)&&(x=function(e){var t=c(e),o="[object Object]"==t?e.constructor:void 0,r=o?l(o):"";if(r)switch(r){case v:return h;case y:return u;case g:return d;case b:return p;case _:return f}return t}),e.exports=x},5911:(e,t,o)=>{var r=o(8859),n=o(4248),i=o(9219);e.exports=function(e,t,o,a,s,c){var l=1&o,u=e.length,d=t.length;if(u!=d&&!(l&&d>u))return!1;var p=c.get(e),f=c.get(t);if(p&&f)return p==t&&f==e;var h=-1,v=!0,y=2&o?new r:void 0;for(c.set(e,t),c.set(t,e);++h<u;){var g=e[h],b=t[h];if(a)var _=l?a(b,g,h,t,e,c):a(g,b,h,e,t,c);if(void 0!==_){if(_)continue;v=!1;break}if(y){if(!n(t,function(e,t){if(!i(y,t)&&(g===e||s(g,e,o,a,c)))return y.push(t)})){v=!1;break}}else if(g!==b&&!s(g,b,o,a,c)){v=!1;break}}return c.delete(e),c.delete(t),v}},5950:(e,t,o)=>{var r=o(695),n=o(8984),i=o(4894);e.exports=function(e){return i(e)?r(e):n(e)}},6009:(e,t,o)=>{e=o.nmd(e);var r=o(4840),n=t&&!t.nodeType&&t,i=n&&e&&!e.nodeType&&e,a=i&&i.exports===n&&r.process,s=function(){try{return i&&i.require&&i.require("util").types||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s},6025:(e,t,o)=>{var r=o(5288);e.exports=function(e,t){for(var o=e.length;o--;)if(r(e[o][0],t))return o;return-1}},6110:(e,t,o)=>{var r=o(5083),n=o(392);e.exports=function(e,t){var o=n(e,t);return r(o)?o:void 0}},6449:e=>{var t=Array.isArray;e.exports=t},6545:(e,t,o)=>{var r=o(6110)(o(9325),"Set");e.exports=r},6721:(e,t,o)=>{var r=o(1042),n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var o=t[e];return"__lodash_hash_undefined__"===o?void 0:o}return n.call(t,e)?t[e]:void 0}},7068:(e,t,o)=>{var r=o(7217),n=o(5911),i=o(1986),a=o(689),s=o(5861),c=o(6449),l=o(3656),u=o(7167),d="[object Arguments]",p="[object Array]",f="[object Object]",h=Object.prototype.hasOwnProperty;e.exports=function(e,t,o,v,y,g){var b=c(e),_=c(t),x=b?p:s(e),w=_?p:s(t),j=(x=x==d?f:x)==f,k=(w=w==d?f:w)==f,m=x==w;if(m&&l(e)){if(!l(t))return!1;b=!0,j=!1}if(m&&!j)return g||(g=new r),b||u(e)?n(e,t,o,v,y,g):i(e,t,x,o,v,y,g);if(!(1&o)){var O=j&&h.call(e,"__wrapped__"),S=k&&h.call(t,"__wrapped__");if(O||S){var E=O?e.value():e,P=S?t.value():t;return g||(g=new r),y(E,P,o,v,g)}}return!!m&&(g||(g=new r),a(e,t,o,v,y,g))}},7167:(e,t,o)=>{var r=o(4901),n=o(7301),i=o(6009),a=i&&i.isTypedArray,s=a?n(a):r;e.exports=s},7217:(e,t,o)=>{var r=o(79),n=o(1420),i=o(938),a=o(3605),s=o(9817),c=o(945);function l(e){var t=this.__data__=new r(e);this.size=t.size}l.prototype.clear=n,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=s,l.prototype.set=c,e.exports=l},7296:(e,t,o)=>{var r,n=o(5481),i=(r=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!i&&i in e}},7301:e=>{e.exports=function(e){return function(t){return e(t)}}},7473:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},7534:(e,t,o)=>{var r=o(2552),n=o(346);e.exports=function(e){return n(e)&&"[object Arguments]"==r(e)}},7670:(e,t,o)=>{var r=o(2651);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},7828:(e,t,o)=>{var r=o(9325).Uint8Array;e.exports=r},8096:e=>{e.exports=function(e,t){for(var o=-1,r=Array(e);++o<e;)r[o]=t(o);return r}},8223:(e,t,o)=>{var r=o(6110)(o(9325),"Map");e.exports=r},8303:(e,t,o)=>{var r=o(6110)(o(9325),"WeakMap");e.exports=r},8655:(e,t,o)=>{var r=o(6025);e.exports=function(e){return r(this.__data__,e)>-1}},8859:(e,t,o)=>{var r=o(3661),n=o(1380),i=o(1459);function a(e){var t=-1,o=null==e?0:e.length;for(this.__data__=new r;++t<o;)this.add(e[t])}a.prototype.add=a.prototype.push=n,a.prototype.has=i,e.exports=a},8984:(e,t,o)=>{var r=o(5527),n=o(3650),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return n(e);var t=[];for(var o in Object(e))i.call(e,o)&&"constructor"!=o&&t.push(o);return t}},9219:e=>{e.exports=function(e,t){return e.has(t)}},9325:(e,t,o)=>{var r=o(4840),n="object"==typeof self&&self&&self.Object===Object&&self,i=r||n||Function("return this")();e.exports=i},9350:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},9770:e=>{e.exports=function(e,t){for(var o=-1,r=null==e?0:e.length,n=0,i=[];++o<r;){var a=e[o];t(a,o,e)&&(i[n++]=a)}return i}},9817:e=>{e.exports=function(e){return this.__data__.has(e)}},9935:e=>{e.exports=function(){return!1}}},o={};function r(e){var n=o[e];if(void 0!==n)return n.exports;var i=o[e]={id:e,loaded:!1,exports:{}};return t[e](i,i.exports,r),i.loaded=!0,i.exports}r.m=t,e=[],r.O=(t,o,n,i)=>{if(!o){var a=1/0;for(u=0;u<e.length;u++){for(var[o,n,i]=e[u],s=!0,c=0;c<o.length;c++)(!1&i||a>=i)&&Object.keys(r.O).every(e=>r.O[e](o[c]))?o.splice(c--,1):(s=!1,i<a&&(a=i));if(s){e.splice(u--,1);var l=n();void 0!==l&&(t=l)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[o,n,i]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={61:0,118:0};r.O.j=t=>0===e[t];var t=(t,o)=>{var n,i,[a,s,c]=o,l=0;if(a.some(t=>0!==e[t])){for(n in s)r.o(s,n)&&(r.m[n]=s[n]);if(c)var u=c(r)}for(t&&t(o);l<a.length;l++)i=a[l],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(u)},o=globalThis.webpackChunkyokoi=globalThis.webpackChunkyokoi||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var n=r.O(void 0,[118],()=>r(5432));n=r.O(n)})();